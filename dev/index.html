<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · CommonDataModel.jl</title><meta name="title" content="Home · CommonDataModel.jl"/><meta property="og:title" content="Home · CommonDataModel.jl"/><meta property="twitter:title" content="Home · CommonDataModel.jl"/><meta name="description" content="Documentation for CommonDataModel.jl."/><meta property="og:description" content="Documentation for CommonDataModel.jl."/><meta property="twitter:description" content="Documentation for CommonDataModel.jl."/><meta property="og:url" content="https://juliageo.github.io/CommonDataModel.jl/"/><meta property="twitter:url" content="https://juliageo.github.io/CommonDataModel.jl/"/><link rel="canonical" href="https://juliageo.github.io/CommonDataModel.jl/"/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>CommonDataModel.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Data-types"><span>Data types</span></a></li><li><a class="tocitem" href="#API"><span>API</span></a></li></ul></li><li><a class="tocitem" href="tutorial1/">Tutorials</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaGeo/CommonDataModel.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h2 id="Data-types"><a class="docs-heading-anchor" href="#Data-types">Data types</a><a id="Data-types-1"></a><a class="docs-heading-anchor-permalink" href="#Data-types" title="Permalink"></a></h2><p>In order to implement a new dataset based <code>CommonDataModel.jl</code> one has to create two types derived from:</p><ol><li><a href="#CommonDataModel.AbstractVariable"><code>AbstractVariable</code></a>: a variable with named dimension and metadata</li><li><a href="#CommonDataModel.AbstractDataset"><code>AbstractDataset</code></a>: a collection of variable with named dimension, metadata and sub-groups. The sub-groups are also <code>AbstractDataset</code>.</li></ol><p><code>CommonDataModel.jl</code> also provides a type <code>CFVariable</code> which wraps a type derived from <code>AbstractVariable</code> and applies the scaling described in <a href="#CommonDataModel.cfvariable-Tuple{Any, Any}"><code>cfvariable</code></a>.</p><p>Overview of methods:</p><table><tr><th style="text-align: right"></th><th style="text-align: right">get names</th><th style="text-align: right">get values</th><th style="text-align: right">set value</th><th style="text-align: right">property</th></tr><tr><td style="text-align: right">Dimensions</td><td style="text-align: right"><a href="#CommonDataModel.dimnames-Tuple{CommonDataModel.AbstractVariable}"><code>dimnames</code></a></td><td style="text-align: right"><a href="#CommonDataModel.dim-Tuple{CommonDataModel.AbstractVariable, Union{AbstractString, Symbol}}"><code>dim</code></a></td><td style="text-align: right"><a href="#CommonDataModel.defDim-Tuple{CommonDataModel.AbstractDataset, Union{AbstractString, Symbol}, Any}"><code>defDim</code></a></td><td style="text-align: right"><code>dim</code></td></tr><tr><td style="text-align: right">Attributes</td><td style="text-align: right"><a href="#CommonDataModel.attribnames-Tuple{Union{CommonDataModel.AbstractDataset, CommonDataModel.AbstractVariable}}"><code>attribnames</code></a></td><td style="text-align: right"><a href="#CommonDataModel.attrib-Tuple{Union{CommonDataModel.AbstractDataset, CommonDataModel.AbstractVariable}, Union{AbstractString, Symbol}}"><code>attrib</code></a></td><td style="text-align: right"><a href="#CommonDataModel.defAttrib-Tuple{CommonDataModel.AbstractDataset, Union{AbstractString, Symbol}, Any}"><code>defAttrib</code></a></td><td style="text-align: right"><code>attrib</code></td></tr><tr><td style="text-align: right">Variables</td><td style="text-align: right"><a href="#CommonDataModel.varnames-Tuple{CommonDataModel.AbstractDataset}"><code>varnames</code></a></td><td style="text-align: right"><a href="#CommonDataModel.variable-Tuple{CommonDataModel.AbstractDataset, Union{AbstractString, Symbol}}"><code>variable</code></a></td><td style="text-align: right"><a href="#CommonDataModel.defVar-Tuple{CommonDataModel.AbstractDataset, Union{AbstractString, Symbol}, Union{CommonDataModel.AbstractVariable, CommonDataModel.SubVariable}}"><code>defVar</code></a></td><td style="text-align: right">-</td></tr><tr><td style="text-align: right">Groups</td><td style="text-align: right"><a href="#CommonDataModel.groupnames-Tuple{CommonDataModel.AbstractDataset}"><code>groupnames</code></a></td><td style="text-align: right"><a href="#CommonDataModel.group-Tuple{CommonDataModel.AbstractDataset, Union{AbstractString, Symbol}}"><code>group</code></a></td><td style="text-align: right"><a href="#CommonDataModel.defGroup-Tuple{CommonDataModel.AbstractDataset, Union{AbstractString, Symbol}}"><code>defGroup</code></a></td><td style="text-align: right"><code>group</code></td></tr></table><p>For read-only datasets, the methods in &quot;set value&quot; column are not to be implemented. Attributes can also be delete with the <a href="#CommonDataModel.delAttrib-Tuple{Union{CommonDataModel.AbstractDataset, CommonDataModel.AbstractVariable}, Union{AbstractString, Symbol}, Any}"><code>delAttrib</code></a> functions.</p><p>Every struct deriving from <code>AbstractDataset</code> have automaticaly the special properties <code>dim</code>, <code>attrib</code> and <code>group</code> which act like dictionaries (unless a field with this name already exists). For <code>attrib</code>, calls to <code>keys</code>, <code>getindex</code> and <code>setindex!</code>, <code>delete!</code> are dispated to <code>attribnames</code>, <code>attrib</code>,<code>defAttrib</code>, and <code>delAttrib</code> respectively (and likewise for other properties). For example:</p><pre><code class="language-julia hljs">using NCDatasets
ds = NCDataset(&quot;file.nc&quot;)
# setindex!(ds.attrib,...) here automatically calls defAttrib(ds,...)
ds.attrib[&quot;title&quot;] = &quot;my amazing results&quot;;</code></pre><p>Variables can be accessed by directly indexing the <code>AbstractDataset</code>.</p><p>Every struct deriving from <code>AbstractVariable</code> has the properties <code>dim</code>, and <code>attrib</code>.</p><p>Current functionalities of CommonDataModel include:</p><ul><li>virtually concatenating files along a given dimension</li><li>create a virtual subset ((<a href="#Base.view-Tuple{CommonDataModel.AbstractVariable, Vararg{Any}}"><code>view</code></a>)) by indices or by values of coordinate variables (<a href="#CommonDataModel.select-Tuple{Any, Vararg{Any}}"><code>select</code></a>, <a href="#CommonDataModel.@select-Tuple{Any, Any}"><code>@select</code></a>)</li><li>group, map and reduce a variable (<a href="#CommonDataModel.groupby-Union{Tuple{TF}, Tuple{Union{CommonDataModel.AbstractVariable, CommonDataModel.SubVariable}, Pair{&lt;:Union{AbstractString, Symbol}, TF}}} where TF"><code>groupby</code></a>, <a href="#CommonDataModel.@groupby-Tuple{Any, Any}"><code>@groupby</code></a>, <a href="#CommonDataModel.rolling-Tuple{Any, Pair}"><code>rolling</code></a>)</li></ul><h2 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="CommonDataModel.AbstractDataset"><a class="docstring-binding" href="#CommonDataModel.AbstractDataset"><code>CommonDataModel.AbstractDataset</code></a> — <span class="docstring-category">Type</span></summary><section><div><p><code>AbstractDataset</code> is a collection of multidimensional variables (for example a NetCDF or GRIB file)</p><p>A data set <code>ds</code> of a type derived from <code>AbstractDataset</code> should implemented at minimum:</p><ul><li><code>varnames(ds)</code>: return a list of variable names as strings</li><li><code>variable(ds,varname::String)</code>: return an array-like data structure (derived from <code>AbstractVariable</code>) of the variables corresponding to <code>varname</code>. This array-like data structure should follow the CF semantics.</li><li><code>dimnames(ds)</code>: should be an iterable with all dimension names in the data set  <code>ds</code></li><li><code>dim(ds,name)</code>: dimension value corresponding to name</li></ul><p>Optionally a data set can have attributes and groups:</p><ul><li><code>attribnames(ds)</code>: should be an iterable with all attribute names</li><li><code>attrib(ds,name)</code>: attribute value corresponding to name</li><li><code>groupnames(ds)</code>: should be an iterable with all group names</li><li><code>group(ds,name)</code>: group corresponding to the name</li></ul><p>For a writable dataset, one should also implement:</p><ul><li><code>defDim</code>: define a dimension</li><li><code>defAttrib</code>: define a attribute</li><li><code>defVar</code>: define a variable</li><li><code>defGroup</code>: define a group</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/types.jl#L6-L30">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.AbstractVariable"><a class="docstring-binding" href="#CommonDataModel.AbstractVariable"><code>CommonDataModel.AbstractVariable</code></a> — <span class="docstring-category">Type</span></summary><section><div><p><code>AbstractVariable{T,N}</code> is a subclass of <code>DiskArrays.AbstractDiskArray{T,N}</code> which is a subclass of <code>AbstractArray{T, N}</code>. A variable <code>v</code> of a type derived from <code>AbstractVariable</code> should implement:</p><ul><li><code>name(v)</code>: should be the name of variable within the data set</li><li><code>dimnames(v)</code>: should be a iterable data structure with all dimension names of the variable <code>v</code></li><li><code>dataset(v)</code>: the parent dataset containing <code>v</code></li><li><code>Base.size(v)</code>: the size of the variable</li><li><code>DiskArrays.readblock!(v, aout, indices...)</code>: get the data of <code>v</code> at the provided indices. See <a href="https://github.com/JuliaIO/DiskArrays.jl">DiskArrays.jl readme</a> for more details.</li></ul><p>Optionally a variable can have attributes:</p><ul><li><code>attribnames(v)</code>: should be an iterable with all attribute names</li><li><code>attrib(v,name)</code>: attribute value corresponding to name</li></ul><p>For a writable dataset, one should also implement:</p><ul><li><code>defAttrib</code>: define a attribute</li><li><code>DiskArrays.writeblock!(v,ain,indices...)</code>: set the <code>ain</code> in <code>v</code> at the provided indices. See <a href="https://github.com/JuliaIO/DiskArrays.jl">DiskArrays.jl readme</a> for more details.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/types.jl#L35-L54">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.Attributes"><a class="docstring-binding" href="#CommonDataModel.Attributes"><code>CommonDataModel.Attributes</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>A collection of attributes with a Dict-like interface dispatching to <code>attribnames</code>, <code>attrib</code>, <code>defAttrib</code> for <code>keys</code>, <code>getindex</code> and <code>setindex!</code> respectively.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/types.jl#L75-L79">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.CFVariable"><a class="docstring-binding" href="#CommonDataModel.CFVariable"><code>CommonDataModel.CFVariable</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>Variable (with applied transformations following the CF convention) attrib can have different attributes as the parent variables (used in GRIBDatasets to map from grib attributes to CF attributes)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/types.jl#L59-L63">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.Dimensions"><a class="docstring-binding" href="#CommonDataModel.Dimensions"><code>CommonDataModel.Dimensions</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>A collection of dimensions with a Dict-like interface dispatching to <code>dimnames</code>, <code>dim</code>, <code>defDim</code> for <code>keys</code>, <code>getindex</code> and <code>setindex!</code> respectively.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/types.jl#L84-L88">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.Groups"><a class="docstring-binding" href="#CommonDataModel.Groups"><code>CommonDataModel.Groups</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>A collection of groups with a Dict-like interface dispatching to <code>groupnames</code> and <code>group</code> for <code>keys</code> and <code>getindex</code> respectively.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/types.jl#L94-L97">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.delete!-Tuple{CommonDataModel.Attributes, Union{AbstractString, Symbol}}"><a class="docstring-binding" href="#Base.delete!-Tuple{CommonDataModel.Attributes, Union{AbstractString, Symbol}}"><code>Base.delete!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">Base.delete!(a::Attributes, name)</code></pre><p>Delete the attribute <code>name</code> from the attribute list <code>a</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/attribute.jl#L118-L122">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.filter-Tuple{Union{CommonDataModel.AbstractVariable, CommonDataModel.SubVariable}, Vararg{Union{Colon, Integer, AbstractVector{&lt;:Integer}}}}"><a class="docstring-binding" href="#Base.filter-Tuple{Union{CommonDataModel.AbstractVariable, CommonDataModel.SubVariable}, Vararg{Union{Colon, Integer, AbstractVector{&lt;:Integer}}}}"><code>Base.filter</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">data = CommonDataModel.filter(ncv, indices...; accepted_status_flags = nothing)</code></pre><p>Load and filter observations by replacing all variables without an acepted status flag to <code>missing</code>. It is used the attribute <code>ancillary_variables</code> to identify the status flag.</p><pre><code class="language-julia hljs"># da[&quot;data&quot;] is 2D matrix
good_data = NCDatasets.filter(ds[&quot;data&quot;],:,:, accepted_status_flags = [&quot;good_data&quot;,&quot;probably_good_data&quot;])</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/cfconventions.jl#L89-L101">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.getindex-Tuple{CommonDataModel.AbstractDataset, Union{AbstractString, Symbol}}"><a class="docstring-binding" href="#Base.getindex-Tuple{CommonDataModel.AbstractDataset, Union{AbstractString, Symbol}}"><code>Base.getindex</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">v = getindex(ds::AbstractDataset, varname::SymbolOrString)</code></pre><p>Return the variable <code>varname</code> in the dataset <code>ds</code> as a <code>CFVariable</code>. The following CF convention are honored when the variable is indexed:</p><ul><li><code>_FillValue</code> or <code>missing_value</code> (which can be a list) will be returned as <code>missing</code>.</li><li><code>scale_factor</code> and <code>add_offset</code> are applied (output = <code>scale_factor</code> * <code>data_in_file</code> +  <code>add_offset</code>)</li><li>time variables (recognized by the units attribute and possibly the calendar attribute) are returned usually as <code>DateTime</code> object. Note that <code>CFTime.DateTimeAllLeap</code>, <code>CFTime.DateTimeNoLeap</code> and <code>CF.TimeDateTime360Day</code> cannot be converted to the proleptic gregorian calendar used in julia and are returned as such. (See <a href="https://github.com/JuliaGeo/CFTime.jl"><code>CFTime.jl</code></a> for more information about those date types.) If a calendar is defined but not among the ones specified in the CF convention, then the data in the file is not converted into a date structure.</li></ul><p>A call <code>getindex(ds, varname)</code> is usually written as <code>ds[varname]</code>.</p><p>If variable represents a cell boundary, the attributes <code>calendar</code> and <code>units</code> of the related variables are used, if they are not specified. For example:</p><pre><code class="language-julia hljs">dimensions:
  time = UNLIMITED; // (5 currently)
  nv = 2;
variables:
  double time(time);
    time:long_name = &quot;time&quot;;
    time:units = &quot;hours since 1998-04-019 06:00:00&quot;;
    time:bounds = &quot;time_bnds&quot;;
  double time_bnds(time,nv);</code></pre><p>In this case, the variable <code>time_bnds</code> uses the units and calendar of <code>time</code> because both variables are related thought the bounds attribute following the CF conventions.</p><p>See also <a href="#CommonDataModel.cfvariable-Tuple{Any, Any}"><code>cfvariable(ds, varname)</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dataset.jl#L132-L168">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.getindex-Tuple{CommonDataModel.Attributes, Any}"><a class="docstring-binding" href="#Base.getindex-Tuple{CommonDataModel.Attributes, Any}"><code>Base.getindex</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">getindex(a::Attributes,name::SymbolOrString)</code></pre><p>Return the value of the attribute called <code>name</code> from the attribute list <code>a</code>. Generally the attributes are loaded by indexing, for example:</p><pre><code class="language-julia hljs">using NCDatasets
ds = NCDataset(&quot;file.nc&quot;)
title = ds.attrib[&quot;title&quot;]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/attribute.jl#L81-L93">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.getindex-Tuple{CommonDataModel.Groups, Any}"><a class="docstring-binding" href="#Base.getindex-Tuple{CommonDataModel.Groups, Any}"><code>Base.getindex</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">group = getindex(g::Groups,groupname::AbstractString)</code></pre><p>Return the NetCDF <code>group</code> with the name <code>groupname</code> from the parent group <code>g</code>.</p><p>For example:</p><pre><code class="language-julia hljs">ds = NCDataset(&quot;results.nc&quot;, &quot;r&quot;);
forecast_group = ds.group[&quot;forecast&quot;]
forecast_temp = forecast_group[&quot;temperature&quot;]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dataset.jl#L272-L285">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.getindex-Tuple{Union{CommonDataModel.AbstractDataset, CommonDataModel.AbstractVariable}, CommonDataModel.CFStdName}"><a class="docstring-binding" href="#Base.getindex-Tuple{Union{CommonDataModel.AbstractDataset, CommonDataModel.AbstractVariable}, CommonDataModel.CFStdName}"><code>Base.getindex</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">var = getindex(ds::Union{AbstractDataset,AbstractVariable},cfname::CFStdName)</code></pre><p>Return the NetCDF variable <code>var</code> with the standard name <code>cfname</code> from a dataset. If the first argument is a variable, then the search is limited to all variables with the same dimension names.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dataset.jl#L249-L255">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.haskey-Tuple{CommonDataModel.AbstractDataset, Any}"><a class="docstring-binding" href="#Base.haskey-Tuple{CommonDataModel.AbstractDataset, Any}"><code>Base.haskey</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">haskey(ds::AbstractDataset,varname)</code></pre><p>Return true if the dataset <code>ds</code> has a variable with the name <code>name</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dataset.jl#L187-L191">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.keys-Tuple{CommonDataModel.AbstractDataset}"><a class="docstring-binding" href="#Base.keys-Tuple{CommonDataModel.AbstractDataset}"><code>Base.keys</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">keys(ds::AbstractDataset)</code></pre><p>Return a list of all variable names in the dataset <code>ds</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dataset.jl#L178-L182">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.keys-Tuple{CommonDataModel.Attributes}"><a class="docstring-binding" href="#Base.keys-Tuple{CommonDataModel.Attributes}"><code>Base.keys</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">Base.keys(a::Attributes)</code></pre><p>Return a list of the names of all attributes.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/attribute.jl#L73-L77">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.keys-Tuple{CommonDataModel.Dimensions}"><a class="docstring-binding" href="#Base.keys-Tuple{CommonDataModel.Dimensions}"><code>Base.keys</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">keys(d::Dimensions)</code></pre><p>Return a list of all dimension names in NCDataset <code>ds</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">ds = NCDataset(&quot;results.nc&quot;, &quot;r&quot;);
dimnames = keys(ds.dim)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dimension.jl#L88-L99">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.keys-Tuple{CommonDataModel.Groups}"><a class="docstring-binding" href="#Base.keys-Tuple{CommonDataModel.Groups}"><code>Base.keys</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">names = keys(g::Groups)</code></pre><p>Return the names of all subgroubs of the group <code>g</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dataset.jl#L265-L269">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.merge-Tuple{Vararg{CommonDataModel.AbstractDataset}}"><a class="docstring-binding" href="#Base.merge-Tuple{Vararg{CommonDataModel.AbstractDataset}}"><code>Base.merge</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">mfds = merge(ds1, ds2...)</code></pre><p>Virtually merge all datasets (<code>ds1</code>,...) by concatenating the list of variables. Every variable which happend to be repeated in several datasets is should to be constant in all datasets.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/multifile.jl#L143-L149">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.reduce-Tuple{Function, CommonDataModel.GroupedVariable}"><a class="docstring-binding" href="#Base.reduce-Tuple{Function, CommonDataModel.GroupedVariable}"><code>Base.reduce</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">gr = reduce(f,gv::GroupedVariable)</code></pre><p>Reduce the grouped variable <code>gv</code> along grouped dimension using the function <code>f</code>. The function <code>f</code> will be called as <code>f(x,dims=d)</code> where <code>x</code> array (an element of <code>gv</code>) and <code>d</code> is an integer of the dimension overwhich one need to reduce <code>x</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/groupby.jl#L420-L427">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.setindex!-Tuple{CommonDataModel.Attributes, Any, Any}"><a class="docstring-binding" href="#Base.setindex!-Tuple{CommonDataModel.Attributes, Any, Any}"><code>Base.setindex!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">Base.setindex!(a::Attributes,data,name::SymbolOrString)</code></pre><p>Set the attribute called <code>name</code> to the value <code>data</code> in the attribute list <code>a</code>. <code>data</code> can be a vector or a scalar. A scalar is handeld as a vector with one element in the NetCDF data model.</p><p>Generally the attributes are defined by indexing, for example:</p><pre><code class="language-julia hljs">ds = NCDataset(&quot;file.nc&quot;,&quot;c&quot;)
ds.attrib[&quot;title&quot;] = &quot;my title&quot;
close(ds)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/attribute.jl#L97-L111">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.setindex!-Tuple{CommonDataModel.Dimensions, Any, Any}"><a class="docstring-binding" href="#Base.setindex!-Tuple{CommonDataModel.Dimensions, Any, Any}"><code>Base.setindex!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">setindex!(d::Dimensions,len,name::AbstractString)</code></pre><p>Defines the dimension called <code>name</code> to the length <code>len</code>, for example:</p><pre><code class="language-julia hljs">ds = NCDataset(&quot;file.nc&quot;,&quot;c&quot;)
ds.dim[&quot;longitude&quot;] = 100</code></pre><p>If <code>len</code> is the special value <code>Inf</code>, then the dimension is considered as <code>unlimited</code>, i.e. it will grow as data is added to the NetCDF file.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dimension.jl#L106-L118">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.size-Tuple{CommonDataModel.CFVariable}"><a class="docstring-binding" href="#Base.size-Tuple{CommonDataModel.CFVariable}"><code>Base.size</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">sz = size(var::CFVariable)</code></pre><p>Return a tuple of integers with the size of the variable <code>var</code>.</p><div class="admonition is-info" id="Note-bd9544b854d3d560"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-bd9544b854d3d560" title="Permalink"></a></header><div class="admonition-body"><p>Note that the size of a variable can change, i.e. for a variable with an unlimited dimension.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/cfvariable.jl#L4-L13">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.view-Tuple{CommonDataModel.AbstractVariable, Vararg{Any}}"><a class="docstring-binding" href="#Base.view-Tuple{CommonDataModel.AbstractVariable, Vararg{Any}}"><code>Base.view</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">sv = view(v::CommonDataModel.AbstractVariable,indices...)</code></pre><p>Returns a view of the variable <code>v</code> where indices are only lazily applied. No data is actually copied or loaded. Modifications to a view <code>sv</code>, also modifies the underlying array <code>v</code>. All attributes of <code>v</code> are also present in <code>sv</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using NCDatasets
fname = tempname()
data = zeros(Int,10,11)
ds = NCDataset(fname,&quot;c&quot;)
ncdata = defVar(ds,&quot;temp&quot;,data,(&quot;lon&quot;,&quot;lat&quot;))
ncdata_view = view(ncdata,2:3,2:4)
size(ncdata_view)
# output (2,3)
ncdata_view[1,1] = 1
ncdata[2,2]
# outputs 1 as ncdata is also modified
close(ds)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/subvariable.jl#L68-L93">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.write-Tuple{CommonDataModel.AbstractDataset, CommonDataModel.AbstractDataset}"><a class="docstring-binding" href="#Base.write-Tuple{CommonDataModel.AbstractDataset, CommonDataModel.AbstractDataset}"><code>Base.write</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">write(dest::AbstractDataset, src::AbstractDataset; include = keys(src), exclude = [])</code></pre><p>Write the variables of <code>src</code> dataset into an empty <code>dest</code> dataset (which must be opened in mode <code>&quot;a&quot;</code> or <code>&quot;c&quot;</code>). The keywords <code>include</code> and <code>exclude</code> configure which variable of <code>src</code> should be included (by default all), or which should be <code>excluded</code> (by default none).</p><p>If the first argument is a file name, then the dataset is open in create mode (<code>&quot;c&quot;</code>).</p><p>This function is useful when you want to save the dataset from a multi-file dataset.</p><p>To save a subset, one can use the view function <code>view</code> to virtually slice a dataset:</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">NCDataset(fname_src) do ds
    write(fname_slice,view(ds, lon = 2:3))
end</code></pre><p>All variables in the source file <code>fname_src</code> with a dimension <code>lon</code> will be sliced along the indices <code>2:3</code> for the <code>lon</code> dimension. All attributes (and variables without a dimension <code>lon</code>) will be copied over unmodified.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dataset.jl#L304-L329">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.ancillaryvariables-Tuple{Union{CommonDataModel.CFVariable, CommonDataModel.SubVariable{&lt;:Any, &lt;:Any, &lt;:CommonDataModel.CFVariable}}, Any}"><a class="docstring-binding" href="#CommonDataModel.ancillaryvariables-Tuple{Union{CommonDataModel.CFVariable, CommonDataModel.SubVariable{&lt;:Any, &lt;:Any, &lt;:CommonDataModel.CFVariable}}, Any}"><code>CommonDataModel.ancillaryvariables</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">ncvar = CommonDataModel.ancillaryvariables(ncv::CFVariable,modifier)</code></pre><p>Return the first ancillary variables from the NetCDF (or other format) variable <code>ncv</code> with the standard name modifier <code>modifier</code>. It can be used for example to access related variable like status flags.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/cfconventions.jl#L12-L19">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.attrib-Tuple{Union{CommonDataModel.AbstractDataset, CommonDataModel.AbstractVariable}, Union{AbstractString, Symbol}}"><a class="docstring-binding" href="#CommonDataModel.attrib-Tuple{Union{CommonDataModel.AbstractDataset, CommonDataModel.AbstractVariable}, Union{AbstractString, Symbol}}"><code>CommonDataModel.attrib</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">CommonDatamodel.attrib(ds::Union{AbstractDataset,AbstractVariable},attribname::SymbolOrString)</code></pre><p>Return the value of the attribute <code>attribname</code> in the data set <code>ds</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/attribute.jl#L9-L13">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.attribnames-Tuple{Union{CommonDataModel.AbstractDataset, CommonDataModel.AbstractVariable}}"><a class="docstring-binding" href="#CommonDataModel.attribnames-Tuple{Union{CommonDataModel.AbstractDataset, CommonDataModel.AbstractVariable}}"><code>CommonDataModel.attribnames</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">CommonDatamodel.attribnames(ds::Union{AbstractDataset,AbstractVariable})</code></pre><p>Return an iterable of all attribute names in <code>ds</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/attribute.jl#L1-L5">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.bounds-Tuple{CommonDataModel.CFVariable}"><a class="docstring-binding" href="#CommonDataModel.bounds-Tuple{CommonDataModel.CFVariable}"><code>CommonDataModel.bounds</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">b = bounds(ncvar::NCDatasets.CFVariable)</code></pre><p>Return the CFVariable corresponding to the <code>bounds</code> attribute of the variable <code>ncvar</code>. The time units and calendar from the <code>ncvar</code> are used but not the attributes controling the packing of data <code>scale_factor</code>, <code>add_offset</code> and <code>_FillValue</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/cfconventions.jl#L184-L191">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.cfvariable-Tuple{Any, Any}"><a class="docstring-binding" href="#CommonDataModel.cfvariable-Tuple{Any, Any}"><code>CommonDataModel.cfvariable</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">v = cfvariable(ds::NCDataset,varname::SymbolOrString; &lt;attrib&gt; = &lt;value&gt;)</code></pre><p>Return the variable <code>varname</code> in the dataset <code>ds</code> as a <code>NCDataset.CFVariable</code>. The keyword argument <code>&lt;attrib&gt;</code> are the attributes (<code>fillvalue</code>, <code>missing_value</code>, <code>scale_factor</code>, <code>add_offset</code>, <code>units</code> and <code>calendar</code>) relevant to the CF conventions. By specifing the value of these attributes, the one can override the value specified in the data set. If the attribute is set to <code>nothing</code>, then the attribute is not loaded and the corresponding transformation is ignored. This function is similar to <code>ds[varname]</code> with the additional flexibility that some variable attributes can be overridden.</p><p>Example:</p><pre><code class="language-julia hljs">NCDataset(&quot;foo.nc&quot;,&quot;c&quot;) do ds
  defVar(ds,&quot;data&quot;,[10., 11., 12., 13.], (&quot;time&quot;,), attrib = Dict(
      &quot;add_offset&quot; =&gt; 10.,
      &quot;scale_factor&quot; =&gt; 0.2))
end

# The stored (packed) valued are [0., 5., 10., 15.]
# since 0.2 .* [0., 5., 10., 15.] .+ 10 is [10., 11., 12., 13.]

ds = NCDataset(&quot;foo.nc&quot;);

@show ds[&quot;data&quot;].var[:]
# returns [0., 5., 10., 15.]

@show cfvariable(ds,&quot;data&quot;)[:]
# returns [10., 11., 12., 13.]

# neither add_offset nor scale_factor are applied
@show cfvariable(ds,&quot;data&quot;, add_offset = nothing, scale_factor = nothing)[:]
# returns [0, 5, 10, 15]

# add_offset is applied but not scale_factor
@show cfvariable(ds,&quot;data&quot;, scale_factor = nothing)[:]
# returns [10, 15, 20, 25]

# 0 is declared as the fill value (add_offset and scale_factor are applied as usual)
@show cfvariable(ds,&quot;data&quot;, fillvalue = 0)[:]
# returns [missing, 11., 12., 13.]

# Use the time units: days since 2000-01-01
@show cfvariable(ds,&quot;data&quot;, units = &quot;days since 2000-01-01&quot;)[:]
# returns [DateTime(2000,1,11), DateTime(2000,1,12), DateTime(2000,1,13), DateTime(2000,1,14)]

close(ds)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/cfvariable.jl#L34-L86">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.chunking-Tuple{CommonDataModel.MFVariable}"><a class="docstring-binding" href="#CommonDataModel.chunking-Tuple{CommonDataModel.MFVariable}"><code>CommonDataModel.chunking</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">storage,chunksizes = chunking(v::MFVariable)
storage,chunksizes = chunking(v::MFCFVariable)</code></pre><p>Return the storage type (<code>:contiguous</code> or <code>:chunked</code>) and the chunk sizes of the varable <code>v</code> corresponding to the first file. If the first file in the collection is chunked then this storage attributes are returned. If not the first file is not contiguous, then multi-file variable is still reported as chunked with chunk size equal to the size of the first variable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/multifile.jl#L299-L306">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.coord-Tuple{Union{CommonDataModel.AbstractVariable, CommonDataModel.SubVariable}, Any}"><a class="docstring-binding" href="#CommonDataModel.coord-Tuple{Union{CommonDataModel.AbstractVariable, CommonDataModel.SubVariable}, Any}"><code>CommonDataModel.coord</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">cv = coord(v::Union{CFVariable,Variable},standard_name)</code></pre><p>Find the coordinate of the variable <code>v</code> by the standard name <code>standard_name</code> or some <a href="https://web.archive.org/web/20190918144052/http://cfconventions.org/cf-conventions/cf-conventions.html#latitude-coordinate">standardized heuristics based on units</a>. If the heuristics fail to detect the coordinate, consider to modify the file to add the <code>standard_name</code> attribute. All dimensions of the coordinate must also be dimensions of the variable <code>v</code>.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">using NCDatasets
ds = NCDataset(&quot;file.nc&quot;)
ncv = ds[&quot;SST&quot;]
lon = coord(ncv,&quot;longitude&quot;)[:]
lat = coord(ncv,&quot;latitude&quot;)[:]
v = ncv[:]
close(ds)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/cfconventions.jl#L111-L129">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.dataset-Tuple{CommonDataModel.AbstractVariable}"><a class="docstring-binding" href="#CommonDataModel.dataset-Tuple{CommonDataModel.AbstractVariable}"><code>CommonDataModel.dataset</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">ds = CommonDataModel.dataset(v::AbstractVariable)</code></pre><p>Return the data set <code>ds</code> to which a the variable <code>v</code> belongs to.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/variable.jl#L270-L274">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.defAttrib-Tuple{CommonDataModel.AbstractDataset, Union{AbstractString, Symbol}, Any}"><a class="docstring-binding" href="#CommonDataModel.defAttrib-Tuple{CommonDataModel.AbstractDataset, Union{AbstractString, Symbol}, Any}"><code>CommonDataModel.defAttrib</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">CommonDatamodel.defAttrib(ds::Union{AbstractDataset,AbstractVariable},name::SymbolOrString,data)</code></pre><p>Create an attribute with the name <code>attrib</code> in the data set or variable <code>ds</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/attribute.jl#L18-L22">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.defDim-Tuple{CommonDataModel.AbstractDataset, Union{AbstractString, Symbol}, Any}"><a class="docstring-binding" href="#CommonDataModel.defDim-Tuple{CommonDataModel.AbstractDataset, Union{AbstractString, Symbol}, Any}"><code>CommonDataModel.defDim</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">CommonDatamodel.defDim(ds::AbstractDataset,name::SymbolOrString,len)</code></pre><p>Create dimension with the name <code>name</code> in the data set <code>ds</code> with the length <code>len</code>. <code>len</code> can be <code>Inf</code> for unlimited dimensions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dimension.jl#L46-L51">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.defGroup-Tuple{CommonDataModel.AbstractDataset, Union{AbstractString, Symbol}}"><a class="docstring-binding" href="#CommonDataModel.defGroup-Tuple{CommonDataModel.AbstractDataset, Union{AbstractString, Symbol}}"><code>CommonDataModel.defGroup</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">group = CommonDatamodel.defGroup(ds::AbstractDataset,name::SymbolOrString)</code></pre><p>Create an empty sub-group with the name <code>name</code> in the data set <code>ds</code>. The <code>group</code> is a sub-type of <code>AbstractDataset</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dataset.jl#L48-L53">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.defVar-Tuple{CommonDataModel.AbstractDataset, Union{AbstractString, Symbol}, Union{CommonDataModel.AbstractVariable, CommonDataModel.SubVariable}}"><a class="docstring-binding" href="#CommonDataModel.defVar-Tuple{CommonDataModel.AbstractDataset, Union{AbstractString, Symbol}, Union{CommonDataModel.AbstractVariable, CommonDataModel.SubVariable}}"><code>CommonDataModel.defVar</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">v = CommonDataModel.defVar(ds::AbstractDataset,src::AbstractVariable)
v = CommonDataModel.defVar(ds::AbstractDataset,name::SymbolOrString,src::AbstractVariable)</code></pre><p>Defines and return the variable in the data set <code>ds</code> copied from the variable <code>src</code>. The dimension name, attributes and data are copied from <code>src</code> as well as the variable name (unless provide by <code>name</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/variable.jl#L198-L205">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.delAttrib-Tuple{Union{CommonDataModel.AbstractDataset, CommonDataModel.AbstractVariable}, Union{AbstractString, Symbol}, Any}"><a class="docstring-binding" href="#CommonDataModel.delAttrib-Tuple{Union{CommonDataModel.AbstractDataset, CommonDataModel.AbstractVariable}, Union{AbstractString, Symbol}, Any}"><code>CommonDataModel.delAttrib</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">CommonDatamodel.delAttrib(ds::Union{AbstractDataset,AbstractVariable},name::SymbolOrString,data)</code></pre><p>Deletes an attribute with the name <code>attrib</code> in the data set or variable <code>ds</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/attribute.jl#L28-L32">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.dim-Tuple{CommonDataModel.AbstractVariable, Union{AbstractString, Symbol}}"><a class="docstring-binding" href="#CommonDataModel.dim-Tuple{CommonDataModel.AbstractVariable, Union{AbstractString, Symbol}}"><code>CommonDataModel.dim</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">CommonDatamodel.dim(ds::AbstractDataset,dimname::SymbolOrString)</code></pre><p>Return the length of the dimension <code>dimname</code> in the data set <code>ds</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dimension.jl#L30-L34">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.dimnames-Tuple{CommonDataModel.AbstractVariable}"><a class="docstring-binding" href="#CommonDataModel.dimnames-Tuple{CommonDataModel.AbstractVariable}"><code>CommonDataModel.dimnames</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">CommonDataModel.dimnames(v::AbstractVariable)</code></pre><p>Return an iterable of the dimension names of the variable <code>v</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/variable.jl#L9-L13">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.dimnames-Tuple{Union{CommonDataModel.AbstractDataset, CommonDataModel.AbstractVariable}}"><a class="docstring-binding" href="#CommonDataModel.dimnames-Tuple{Union{CommonDataModel.AbstractDataset, CommonDataModel.AbstractVariable}}"><code>CommonDataModel.dimnames</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">CommonDatamodel.dimnames(ds::AbstractDataset)</code></pre><p>Return an iterable of all dimension names in <code>ds</code>. This information can also be accessed using the property <code>ds.dim</code>:</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">ds = NCDataset(&quot;results.nc&quot;, &quot;r&quot;);
dimnames = keys(ds.dim)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dimension.jl#L2-L14">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.dimnames-Tuple{Union{CommonDataModel.CFVariable, CommonDataModel.MFCFVariable}}"><a class="docstring-binding" href="#CommonDataModel.dimnames-Tuple{Union{CommonDataModel.CFVariable, CommonDataModel.MFCFVariable}}"><code>CommonDataModel.dimnames</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">dimnames(v::CFVariable)</code></pre><p>Return a tuple of strings with the dimension names of the variable <code>v</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/cfvariable.jl#L577-L581">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.dims-Tuple{Union{CommonDataModel.AbstractDataset, CommonDataModel.AbstractVariable}}"><a class="docstring-binding" href="#CommonDataModel.dims-Tuple{Union{CommonDataModel.AbstractDataset, CommonDataModel.AbstractVariable}}"><code>CommonDataModel.dims</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">CommonDatamodel.dims(ds::Union{AbstractDataset,AbstractVariable})</code></pre><p>Return a dict-like of all dimensions and their corresponding length defined in the the data set <code>ds</code> (or variable).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dimension.jl#L57-L61">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.fillvalue-Tuple{Type{Int8}}"><a class="docstring-binding" href="#CommonDataModel.fillvalue-Tuple{Type{Int8}}"><code>CommonDataModel.fillvalue</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">fillvalue(::Type{Int8})
fillvalue(::Type{UInt8})
fillvalue(::Type{Int16})
fillvalue(::Type{UInt16})
fillvalue(::Type{Int32})
fillvalue(::Type{UInt32})
fillvalue(::Type{Int64})
fillvalue(::Type{UInt64})
fillvalue(::Type{Float32})
fillvalue(::Type{Float64})
fillvalue(::Type{Char})
fillvalue(::Type{String})</code></pre><p>Default fill-value for the given type from NetCDF.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/variable.jl#L38-L53">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.find_gv-Tuple{Any, Base.Broadcast.Broadcasted}"><a class="docstring-binding" href="#CommonDataModel.find_gv-Tuple{Any, Base.Broadcast.Broadcasted}"><code>CommonDataModel.find_gv</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">A = find_gv(T,As)</code></pre><p>returns the first type T among the arguments.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/groupby.jl#L250-L254">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.group-Tuple{CommonDataModel.AbstractDataset, Union{AbstractString, Symbol}}"><a class="docstring-binding" href="#CommonDataModel.group-Tuple{CommonDataModel.AbstractDataset, Union{AbstractString, Symbol}}"><code>CommonDataModel.group</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">CommonDatamodel.group(ds::AbstractDataset,groupname::SymbolOrString)</code></pre><p>Return the sub-group data set with the name <code>groupname</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dataset.jl#L39-L43">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.groupby-Union{Tuple{TF}, Tuple{Union{CommonDataModel.AbstractVariable, CommonDataModel.SubVariable}, Pair{&lt;:Union{AbstractString, Symbol}, TF}}} where TF"><a class="docstring-binding" href="#CommonDataModel.groupby-Union{Tuple{TF}, Tuple{Union{CommonDataModel.AbstractVariable, CommonDataModel.SubVariable}, Pair{&lt;:Union{AbstractString, Symbol}, TF}}} where TF"><code>CommonDataModel.groupby</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">gv = CommonDataModel.groupby(v::AbstractVariable,:coordname =&gt; group_fun)
gv = CommonDataModel.groupby(v::AbstractVariable,&quot;coordname&quot; =&gt; group_fun)</code></pre><p>Create a grouped variable <code>gv</code> whose elements composed by all elements in <code>v</code> whose corresponding coordinate variable (with the name <code>coordname</code>) map to the same value once the group function <code>group_fun</code> is applied to the coordinate.</p><p>The grouped variable <code>gv</code> and be reduced using the functions <code>sum</code> <code>mean</code>, <code>median</code>, <code>var</code> or <code>std</code>, for example <code>gr = mean(gv)</code>. The result <code>gr</code> is a lazy structure representing the outcome of these operations performed over the grouped dimension. Only when the result <code>gr</code> is indexed the actually values are computed.</p><p>Broadcasting for <code>gv</code> and <code>gr</code> is overloaded. Broadcasting over all elements of <code>gv</code> means that a mapping function is to be applied to all elements of <code>gv</code> before a possible the reduction. Broadcasting over <code>gr</code>, for example <code>v .- gr</code> mean that <code>gr</code> is broadcasted over the full size of <code>v</code> according to the grouping function.</p><p>Example:</p><pre><code class="language-julia hljs">using NCDatasets, Dates
using CommonDataModel: @groupby, groupby

# create same test data

time = DateTime(2000,1,1):Day(1):DateTime(2009,12,31);  # 10 years
data = rand(Float32.(-9:99),360,180,length(time));
fname = &quot;test_file.nc&quot;
ds = NCDataset(fname,&quot;c&quot;);
defVar(ds,&quot;time&quot;,time,(&quot;time&quot;,));
defVar(ds,&quot;data&quot;,data,(&quot;lon&quot;,&quot;lat&quot;,&quot;time&quot;));

# group over month

gv = @groupby(ds[&quot;data&quot;],Dates.Month(time))
# or
# gv = groupby(ds[&quot;data&quot;],:time =&gt; Dates.Month)
length(gv)
# output 12 as they are all 12 months in this dataset
size(gv[1])
# 360 x 180 x 310 array with all time slices corresponding to the 1st month

# the variable `gv` is equivalent to the following operation
time_month = Dates.Month.(ds[:time][:])
gv2 = [ds[:data][:,:,findall(time_month .== m)] for m in sort(unique(time_month))];

# compute basic statistics

using Statistics
monthly_mean = mean(gv);
size(monthly_mean)
# 360 x 180 x 12 array with the monthly mean

# get a regular julia array
monthly_mean_array = monthly_mean[:,:,:];
typeof(monthly_mean_array)
# Array{Float32, 3}

# substact from data the corresponding monthly mean
monthly_anomalies = data .- mean(gv);

close(ds)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/groupby.jl#L296-L363">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.groupnames-Tuple{CommonDataModel.AbstractDataset}"><a class="docstring-binding" href="#CommonDataModel.groupnames-Tuple{CommonDataModel.AbstractDataset}"><code>CommonDataModel.groupnames</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">CommonDatamodel.groupnames(ds::AbstractDataset)</code></pre><p>All the subgroup names of the data set <code>ds</code>. For a data set containing only a single group, this will be an empty vector of <code>String</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dataset.jl#L30-L35">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.groups-Tuple{CommonDataModel.AbstractDataset}"><a class="docstring-binding" href="#CommonDataModel.groups-Tuple{CommonDataModel.AbstractDataset}"><code>CommonDataModel.groups</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">CommonDatamodel.groups(ds::AbstractDataset)</code></pre><p>Return all sub-group data as a dict-like object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dataset.jl#L58-L62">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.load!-Union{Tuple{N}, Tuple{T}, Tuple{Union{CommonDataModel.CFVariable{T, N}, CommonDataModel.MFCFVariable{T, N}, CommonDataModel.SubVariable{T, N}}, Any, Any, Vararg{Union{Colon, Integer, AbstractVector{&lt;:Integer}}}}} where {T, N}"><a class="docstring-binding" href="#CommonDataModel.load!-Union{Tuple{N}, Tuple{T}, Tuple{Union{CommonDataModel.CFVariable{T, N}, CommonDataModel.MFCFVariable{T, N}, CommonDataModel.SubVariable{T, N}}, Any, Any, Vararg{Union{Colon, Integer, AbstractVector{&lt;:Integer}}}}} where {T, N}"><code>CommonDataModel.load!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">CommonDataModel.load!(ncvar::CFVariable, data, buffer, indices)</code></pre><p>Loads a NetCDF (or other format) variables <code>ncvar</code> in-place and puts the result in <code>data</code> (an array of <code>eltype(ncvar)</code>) along the specified <code>indices</code>. <code>buffer</code> is a temporary  array of the same size as data but the type should be <code>eltype(parent(ncv))</code>, i.e. the corresponding type in the files (before applying <code>scale_factor</code>, <code>add_offset</code> and masking fill values). Scaling and masking will be applied to the array <code>data</code>.</p><p><code>data</code> and <code>buffer</code> can be the same array if <code>eltype(ncvar) == eltype(ncvar.var)</code>.</p><p><strong>Example:</strong></p><pre><code class="language-julia hljs"># create some test array
Dataset(&quot;file.nc&quot;,&quot;c&quot;) do ds
    defDim(ds,&quot;time&quot;,3)
    ncvar = defVar(ds,&quot;vgos&quot;,Int16,(&quot;time&quot;,),attrib = [&quot;scale_factor&quot; =&gt; 0.1])
    ncvar[:] = [1.1, 1.2, 1.3]
    # store 11, 12 and 13 as scale_factor is 0.1
end


ds = Dataset(&quot;file.nc&quot;)
ncv = ds[&quot;vgos&quot;];
# data and buffer must have the right shape and type
data = zeros(eltype(ncv),size(ncv)); # here Vector{Float64}
buffer = zeros(eltype(parent(ncv)),size(ncv)); # here Vector{Int16}
NCDatasets.load!(ncv,data,buffer,:,:,:)
close(ds)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/cfvariable.jl#L611-L643">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.name-Tuple{CommonDataModel.AbstractDataset}"><a class="docstring-binding" href="#CommonDataModel.name-Tuple{CommonDataModel.AbstractDataset}"><code>CommonDataModel.name</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">CommonDatamodel.name(ds::AbstractDataset)</code></pre><p>Name of the group of the data set <code>ds</code>. For a data set containing only a single group, this will be always the root group <code>&quot;/&quot;</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dataset.jl#L12-L17">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.name-Tuple{CommonDataModel.AbstractVariable}"><a class="docstring-binding" href="#CommonDataModel.name-Tuple{CommonDataModel.AbstractVariable}"><code>CommonDataModel.name</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">CommonDataModel.name(v::AbstractVariable)</code></pre><p>Return the name of the variable <code>v</code> as a string.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/variable.jl#L1-L5">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.parentdataset-Tuple{CommonDataModel.AbstractDataset}"><a class="docstring-binding" href="#CommonDataModel.parentdataset-Tuple{CommonDataModel.AbstractDataset}"><code>CommonDataModel.parentdataset</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">pds = CommonDatamodel.parentdataset(ds::AbstractDataset)</code></pre><p>The data set <code>pds</code> containing <code>ds</code> as a sub-group. <code>pds</code> is nothing for the root group.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dataset.jl#L20-L25">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.path-Tuple{CommonDataModel.AbstractDataset}"><a class="docstring-binding" href="#CommonDataModel.path-Tuple{CommonDataModel.AbstractDataset}"><code>CommonDataModel.path</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">CommonDatamodel.path(ds::AbstractDataset)</code></pre><p>File path of the data set <code>ds</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dataset.jl#L2-L6">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.rolling-Tuple{Any, Pair}"><a class="docstring-binding" href="#CommonDataModel.rolling-Tuple{Any, Pair}"><code>CommonDataModel.rolling</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">gv = CommonDataModel.rolling(v::AbstractVariable,:coordname =&gt; n)
gv = CommonDataModel.rolling(v::AbstractVariable,:coordname =&gt; rolling_classes)</code></pre><p>Create a grouped variable <code>gv</code> whose elements composed by all elements in <code>v</code> grouped by a rolling window of length <code>n</code> along the coordinate variable <code>coordname</code>. One can also specify a vector classes (<code>rolling_classes</code>) with as many elements as they are groups and the elements coorespond to the values of the coordinate. Unlike <code>CommonDataModel.groupby</code>, the groups defined by <code>rolling</code> can overlap.</p><p>The grouped variable <code>gv</code> and be reduced using the functions <code>sum</code> <code>mean</code>, <code>median</code>, <code>var</code> or <code>std</code>, for example <code>gr = mean(gv)</code>. The result <code>gr</code> is a lazy structure representing the outcome of these operations performed over the grouped dimension. Only when the result <code>gr</code> is indexed the actually values are computed.</p><p>Broadcasting for <code>gv</code> is overloaded. Broadcasting over all elements of <code>gv</code> means that a mapping function is to be applied to all elements of <code>gv</code> before a possible the reduction.</p><p>This operations is also called &quot;running mean&quot; when using <code>mean</code> as reduction function.</p><p>Example:</p><pre><code class="language-julia hljs">using NCDatasets, Dates
using CommonDataModel: rolling

# create same test data

time = DateTime(2000,1,1):Day(1):DateTime(2009,12,31);  # 10 years
data = rand(Float32.(-9:99),360,180,length(time));
fname = &quot;test_file.nc&quot;
ds = NCDataset(fname,&quot;c&quot;);
defVar(ds,&quot;time&quot;,time,(&quot;time&quot;,));
defVar(ds,&quot;data&quot;,data,(&quot;lon&quot;,&quot;lat&quot;,&quot;time&quot;));

# running weekly mean

gv = rolling(ds[&quot;data&quot;],:time =&gt; 7)
length(gv)
# output 3653 as a mean will be compute for all time instance (including a
# partial mean and the beginning and the end)
size(gv[1])
# output 360 x 180 x 4: the first time slice will only be a mean of 4 values
size(gv[4])
# output 360 x 180 x 7: data from the first 7 days

# compute basic statistics

using Statistics
weekly_running_mean = mean(gv);
size(weekly_running_mean)
# 360 x 180 x 3653 array with the running weekly mean

# get a regular julia array
weekly_running_mean_array = weekly_running_mean[:,:,:];
typeof(weekly_running_mean_array)
# Array{Float32, 3}

# computing a centred 3 monthly mean taking into account that month do not have the
# same length

rolling_classes = [(t - Dates.Month(1)):Day(1):(t + Dates.Month(1)) for t in time]
extrema(length.(rolling_classes))
# output (60, 63)
data_3monthly = mean(rolling(ds[&quot;data&quot;],:time =&gt; rolling_classes))[:,:,:];

close(ds)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/rolling.jl#L64-L136">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.select-Tuple{Any, Vararg{Any}}"><a class="docstring-binding" href="#CommonDataModel.select-Tuple{Any, Vararg{Any}}"><code>CommonDataModel.select</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">vsubset = CommonDataModel.select(v,param1 =&gt; condition1, param2 =&gt; condition2,...)
dssubset = CommonDataModel.select(ds,param1 =&gt; condition1, param2 =&gt; condition2,...)</code></pre><p>Return a subset of the variable <code>v</code> (or dataset <code>ds</code>) satisfying the conditions applied to the corresponding parameters. <code>param1</code>, <code>param2</code> ... are symbols or strings with variable names and <code>condition1</code>, <code>condition2</code> ... are functions taking as a argument the values of the corresponding parameter and return either false (ignore the corresponding elements) or true (select the corresponding elements for loading).</p><p><strong>Examples</strong></p><p>Create a sample file with random data:</p><pre><code class="language-julia hljs">using NCDatasets, Dates
using CommonDataModel: select, Near

fname = &quot;sample_file.nc&quot;
lon = -180:180
lat = -90:90
time = DateTime(2000,1,1):Day(1):DateTime(2000,1,3)
SST = randn(length(lon),length(lat),length(time));

ds = NCDataset(fname,&quot;c&quot;)
defVar(ds,&quot;lon&quot;,lon,(&quot;lon&quot;,));
defVar(ds,&quot;lat&quot;,lat,(&quot;lat&quot;,));
defVar(ds,&quot;time&quot;,time,(&quot;time&quot;,));
defVar(ds,&quot;SST&quot;,SST,(&quot;lon&quot;,&quot;lat&quot;,&quot;time&quot;));


# load by bounding box
v = select(ds[&quot;SST&quot;],
           :lon =&gt; lon -&gt; 30 &lt;= lon &lt;= 60,
           :lat =&gt; lat -&gt; 40 &lt;= lat &lt;= 80)

# You can also select based on `ClosedInterval`s from `IntervalSets.jl`.
# Both 30..60 and 60 ± 20 construct `ClosedInterval`s, see their documentation for details. `∈` can be typed `\in` followed by the TAB-key.

using IntervalSets
v = select(ds[&quot;SST&quot;], :lon =&gt; ∈(30..60), :lat =&gt; ∈(60 ± 20))

# get the indices matching the select query
(lon_indices,lat_indices,time_indices) = parentindices(v)

# get longitude matchting the select query
v_lon = v[&quot;lon&quot;]

# find the nearest time instance
v = select(ds[&quot;SST&quot;],:time =&gt; Near(DateTime(2000,1,4)))

# find the nearest time instance but not earlier or later than 2 hours
# an empty array is returned if no time instance is present

v = select(ds[&quot;SST&quot;],:time =&gt; Near(DateTime(2000,1,3,1),Hour(2)))

close(ds)</code></pre><p>See also <a href="#CommonDataModel.@select-Tuple{Any, Any}"><code>@select</code></a> for more information.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/select.jl#L273-L334">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.set_attribute_color-Tuple{Symbol}"><a class="docstring-binding" href="#CommonDataModel.set_attribute_color-Tuple{Symbol}"><code>CommonDataModel.set_attribute_color</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">    CommonDataModel.set_attribute_color(color::Symbol)</code></pre><p>Set the attribute color. The default color is <code>cyan</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dataset.jl#L421-L425">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.set_section_color-Tuple{Symbol}"><a class="docstring-binding" href="#CommonDataModel.set_section_color-Tuple{Symbol}"><code>CommonDataModel.set_section_color</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">    CommonDataModel.set_section_color(color::Symbol)</code></pre><p>Set the section color. The default color is <code>red</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dataset.jl#L421-L425">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.set_variable_color-Tuple{Symbol}"><a class="docstring-binding" href="#CommonDataModel.set_variable_color-Tuple{Symbol}"><code>CommonDataModel.set_variable_color</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">    CommonDataModel.set_variable_color(color::Symbol)</code></pre><p>Set the variable color. The default color is <code>green</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dataset.jl#L421-L425">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.show_dim-Tuple{IO, Any}"><a class="docstring-binding" href="#CommonDataModel.show_dim-Tuple{IO, Any}"><code>CommonDataModel.show_dim</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">CommonDatamodel.show_dim(io,dim)</code></pre><p>Print a list all dimensions (key/values pairs where key is the dimension names and value the corresponding length) in <code>dim</code> to IO stream <code>io</code>. The IO property <code>:level</code> is used for indentation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dimension.jl#L67-L73">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.time_factor-Tuple{CommonDataModel.CFVariable}"><a class="docstring-binding" href="#CommonDataModel.time_factor-Tuple{CommonDataModel.CFVariable}"><code>CommonDataModel.time_factor</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">tf = CommonDataModel.time_factor(v::CFVariable)</code></pre><p>The time unit in milliseconds. E.g. seconds would be 1000., days would be 86400000. The result can also be <code>nothing</code> if the variable has no time units.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/cfvariable.jl#L234-L239">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.unlimited-Tuple{CommonDataModel.AbstractDataset}"><a class="docstring-binding" href="#CommonDataModel.unlimited-Tuple{CommonDataModel.AbstractDataset}"><code>CommonDataModel.unlimited</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">CommonDatamodel.unlimited(ds::AbstractDataset)</code></pre><p>Iterator of strings with the name of the unlimited dimension.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dataset.jl#L67-L71">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.unlimited-Tuple{CommonDataModel.Dimensions}"><a class="docstring-binding" href="#CommonDataModel.unlimited-Tuple{CommonDataModel.Dimensions}"><code>CommonDataModel.unlimited</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">unlimited(d::Dimensions)</code></pre><p>Return the names of all unlimited dimensions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dimension.jl#L124-L128">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.varbyattrib-Tuple{Union{CommonDataModel.AbstractDataset, CommonDataModel.AbstractVariable, CommonDataModel.SubVariable}}"><a class="docstring-binding" href="#CommonDataModel.varbyattrib-Tuple{Union{CommonDataModel.AbstractDataset, CommonDataModel.AbstractVariable, CommonDataModel.SubVariable}}"><code>CommonDataModel.varbyattrib</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">varbyattrib(ds, attname = attval)</code></pre><p>Returns a list of variable(s) which has the attribute <code>attname</code> matching the value <code>attval</code> in the dataset <code>ds</code>. The list is empty if the none of the variables has the match. The output is a list of <code>CFVariable</code>s.</p><p><strong>Examples</strong></p><p>Load all the data of the first variable with standard name &quot;longitude&quot; from the NetCDF file <code>results.nc</code>.</p><pre><code class="language-julia-repl hljs">julia&gt; ds = NCDataset(&quot;results.nc&quot;, &quot;r&quot;);
julia&gt; data = varbyattrib(ds, standard_name = &quot;longitude&quot;)[1][:]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/dataset.jl#L196-L214">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.variable-Tuple{CommonDataModel.AbstractDataset, Union{AbstractString, Symbol}}"><a class="docstring-binding" href="#CommonDataModel.variable-Tuple{CommonDataModel.AbstractDataset, Union{AbstractString, Symbol}}"><code>CommonDataModel.variable</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">CommonDataModel.variable(ds::AbstractDataset,variablename::SymbolOrString)</code></pre><p>Return the variable with the name <code>variablename</code> from the data set <code>ds</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/variable.jl#L24-L28">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.varnames-Tuple{CommonDataModel.AbstractDataset}"><a class="docstring-binding" href="#CommonDataModel.varnames-Tuple{CommonDataModel.AbstractDataset}"><code>CommonDataModel.varnames</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">CommonDataModel.varnames(ds::AbstractDataset)</code></pre><p>Return an iterable of all the variable name.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/variable.jl#L17-L21">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.@groupby-Tuple{Any, Any}"><a class="docstring-binding" href="#CommonDataModel.@groupby-Tuple{Any, Any}"><code>CommonDataModel.@groupby</code></a> — <span class="docstring-category">Macro</span></summary><section><div><pre><code class="language-julia hljs">gv = CommonDataModel.@groupby(v,group_fun(coordname))</code></pre><p>Create a grouped variable <code>gv</code> whose elements are composed by all elements in <code>v</code> whose corresponding coordinate variable (with the name <code>coordname</code>) map to the same value once the group function <code>group_fun</code> is applied to the coordinate variable.</p><p>See <a href="#CommonDataModel.groupby-Union{Tuple{TF}, Tuple{Union{CommonDataModel.AbstractVariable, CommonDataModel.SubVariable}, Pair{&lt;:Union{AbstractString, Symbol}, TF}}} where TF"><code>groupby</code></a> for more information.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/groupby.jl#L385-L394">source</a></section></details></article><article><details class="docstring" open="true"><summary id="CommonDataModel.@select-Tuple{Any, Any}"><a class="docstring-binding" href="#CommonDataModel.@select-Tuple{Any, Any}"><code>CommonDataModel.@select</code></a> — <span class="docstring-category">Macro</span></summary><section><div><pre><code class="language-julia hljs">vsubset = CommonDataModel.@select(v,expression)
dssubset = CommonDataModel.@select(ds,expression)</code></pre><p>Return a subset of the variable <code>v</code> (or dataset <code>ds</code>) satisfying the condition <code>expression</code> as a view. The condition has the following form:</p><p><code>condition₁ &amp;&amp; condition₂ &amp;&amp; condition₃ ... conditionₙ</code></p><p>Every condition should involve a single 1D variable (typically a coordinate variable, referred as <code>coord</code> below). If <code>v</code> is a variable, the related 1D variable should have a shared dimension with the variable <code>v</code>. All local variables need to have a <code>$</code> prefix (see examples below). This macro is experimental and subjected to change.</p><p>Every condition can either perform:</p><ul><li><p>a nearest match: <code>coord ≈ target_coord</code> (for <code>≈</code> type <code>\approx</code> followed by the TAB-key). Only the data corresponding to the index closest to <code>target_coord</code> is loaded.</p></li><li><p>a nearest match with tolerance: <code>coord ≈ target_coord ± tolerance</code>. As before, but if the difference between the closest value in <code>coord</code> and <code>target_coord</code> is larger (in absolute value) than <code>tolerance</code>, an empty array is returned.</p></li><li><p>a condition operating on scalar values. For example, a <code>condition</code> equal to <code>10 &lt;= lon &lt;= 20</code> loads all data with the longitude between 10 and 20 or <code>abs(lat) &gt; 60</code> loads all variables with a latitude north of 60° N and south of 60° S (assuming that the has the 1D variables <code>lon</code> and <code>lat</code> for longitude and latitude).</p></li></ul><p>Only the data which satisfies all conditions is loaded. All conditions must be chained with an <code>&amp;&amp;</code> (logical and). They should not contain additional parenthesis or other logical operators such as <code>||</code> (logical or).</p><p>To convert the view into a regular array one can use <code>collect</code>, <code>Array</code> or regular indexing. As in julia, views of scalars are wrapped into a zero dimensional arrays which can be dereferenced by using <code>[]</code>. Modifying a view will modify the underlying file (if the file is opened as writable, otherwise an error is issued).</p><p>As for any view, one can use <code>parentindices(vsubset)</code> to get the indices matching a select query.</p><p><strong>Examples</strong></p><p>Create a sample file with random data:</p><pre><code class="language-julia hljs">using NCDatasets, Dates
using CommonDataModel: @select
# or
# using NCDatasets: @select

fname = &quot;sample_file.nc&quot;
lon = -180:180
lat = -90:90
time = DateTime(2000,1,1):Day(1):DateTime(2000,1,3)
SST = randn(length(lon),length(lat),length(time))

ds = NCDataset(fname,&quot;c&quot;)
defVar(ds,&quot;lon&quot;,lon,(&quot;lon&quot;,));
defVar(ds,&quot;lat&quot;,lat,(&quot;lat&quot;,));
defVar(ds,&quot;time&quot;,time,(&quot;time&quot;,));
defVar(ds,&quot;SST&quot;,SST,(&quot;lon&quot;,&quot;lat&quot;,&quot;time&quot;));


# load by bounding box
v = @select(ds[&quot;SST&quot;],30 &lt;= lon &lt;= 60 &amp;&amp; 40 &lt;= lat &lt;= 80)

# substitute a local variable in condition using $
lonr = (30,60) # longitude range
latr = (40,80) # latitude range

v = @select(ds[&quot;SST&quot;],$lonr[1] &lt;= lon &lt;= $lonr[2] &amp;&amp; $latr[1] &lt;= lat &lt;= $latr[2])

# You can also select based on `ClosedInterval`s from `IntervalSets.jl`.
# Both 30..60 and 60 ± 20 construct `ClosedInterval`s, see their documentation for details.

lon_interval = 30..60
lat_interval = 60 ± 20
v = @select(ds[&quot;SST&quot;], lon ∈ $lon_interval &amp;&amp; lat ∈ $lat_interval)

# get the indices matching the select query
(lon_indices,lat_indices,time_indices) = parentindices(v)

# get longitude matchting the select query
v_lon = v[&quot;lon&quot;]

# find the nearest time instance
v = @select(ds[&quot;SST&quot;],time ≈ DateTime(2000,1,4))

# find the nearest time instance but not earlier or later than 2 hours
# an empty array is returned if no time instance is present

v = @select(ds[&quot;SST&quot;],time ≈ DateTime(2000,1,3,1) ± Hour(2))

close(ds)</code></pre><p>Any 1D variable with the same dimension name can be used in <code>@select</code>. For example, if we have a time series of temperature and salinity, the temperature values can also be selected based on salinity:</p><pre><code class="language-julia hljs">using NCDatasets, Dates
using CommonDataModel: @select
fname = &quot;sample_series.nc&quot;
# create a sample time series
time = DateTime(2000,1,1):Day(1):DateTime(2009,12,31)
salinity = randn(length(time)) .+ 35
temperature = randn(length(time))

NCDataset(fname,&quot;c&quot;) do ds
    defVar(ds,&quot;time&quot;,time,(&quot;time&quot;,));
    defVar(ds,&quot;salinity&quot;,salinity,(&quot;time&quot;,));
    defVar(ds,&quot;temperature&quot;,temperature,(&quot;time&quot;,));
end

ds = NCDataset(fname)

# load all temperature data from January where the salinity is larger than 35.
v = @select(ds[&quot;temperature&quot;],Dates.month(time) == 1 &amp;&amp; salinity &gt;= 35)

# this is equivalent to:
v2 = ds[&quot;temperature&quot;][findall(Dates.month.(time) .== 1 .&amp;&amp; salinity .&gt;= 35)]

v == v2
# returns true
close(ds)</code></pre><div class="admonition is-info" id="Note-2ada4c8c21ca10b1"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-2ada4c8c21ca10b1" title="Permalink"></a></header><div class="admonition-body"><p>For optimal performance, one should try to load contiguous data ranges, in particular when the data is loaded over HTTP/OPeNDAP.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/ef7b2543de1f3c6611107a759005429dddad4354/src/select.jl#L98-L219">source</a></section></details></article></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="tutorial1/">Tutorials »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a>, <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a></p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Tuesday 2 December 2025 08:01">Tuesday 2 December 2025</span>. Using Julia version 1.12.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
